version: "1.1"
name: "Simple Data-Driven Testing Example"
description: "Demonstrates basic data-driven testing functionality"

env:
  host: jsonplaceholder.typicode.com
  protocol: https

# Define simple data sources
data:
  user_ids:
    type: inline
    data:
      - user_id: 1
      - user_id: 2
      - user_id: 3
  
  post_data:
    type: inline
    data:
      - title: "Test Post 1"
        body: "Content for post 1"
        user_id: 1
      - title: "Test Post 2"
        body: "Content for post 2"
        user_id: 2

tests:
  user_validation:
    name: "User Data Validation"
    data_driven:
      source: user_ids
      variable: user_info
    steps:
      - name: "Get User by ID"
        http:
          url: ${{env.protocol}}://${{env.host}}/users/${{user_info.user_id}}
          method: GET
        check:
          status: 200
        assertions:
          - type: json_path
            field: id
            operator: eq
            value: ${{user_info.user_id}}
            description: "User ID should match"

  post_creation:
    name: "Create Posts with Data"
    data_driven:
      source: post_data
      variable: post
    steps:
      - name: "Create New Post"
        http:
          url: ${{env.protocol}}://${{env.host}}/posts
          method: POST
          json:
            title: ${{post.title}}
            body: ${{post.body}}
            userId: ${{post.user_id}}
        check:
          status: 201
        assertions:
          - type: json_path
            field: title
            operator: eq
            value: ${{post.title}}
            description: "Created post should have correct title"